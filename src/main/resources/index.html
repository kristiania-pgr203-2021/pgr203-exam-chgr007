<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Questionaire</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="top-bar">
        <h1>Welcome to the Questionnaire</h1>
        <div class="nav-bar">
            <li><a href="/newQuestionaire.html">Add new questionnaire</a></li>
        </div>
    </div>
    <main>
        <div class="flex-container" id="questionnaireContainer">
        </div>

    </main>
    <script>
        fetch("/api/questionnaires").then(function (res) {
            return res.text()
        }).then(function (text) {
            document.querySelector("#questionnaireContainer").innerHTML = text;

            let questionnaires = document.getElementsByClassName("questionnaire");

            for(let i = 0; i<questionnaires.length; i++){
                console.log("RUNNING!")

                let r = Math.floor(Math.random()*255+1);
                let g = Math.floor(Math.random()*255+1);
                let b = Math.floor(Math.random()*255+1);


                const brightness = Math.round(((r * 299) +
                    (g * 587) +
                    (b * 114)) / 1000);

                const textColour = (brightness > 125) ? 'black' : 'white';

                questionnaires[i].style.backgroundColor = 'rgb(' + r + ',' + g + ',' + b + ')'
                questionnaires[i].style.color = textColour;
            }
        });


    </script>
</body>
</html>